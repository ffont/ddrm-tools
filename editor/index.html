<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="3rdparty/bootstrap.min.css">
	<link rel="stylesheet" href="3rdparty/bootstrap-slider.min.css">
	<link rel="stylesheet" href="all.css">

	<title>DDRM Online Editor</title>
</head>
<body onload="init();">

	<nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <div class="navbar-header">
          <h4 id="presetTitle"></h4>
        </div>
    	<div class="navbar-right">
    		<div id="presetMetadata"></div>
        </div>
    </nav>

	<div class="container-fluid">
	
		<div class="row">
			<div class="container-fluid">
				<div id="synthControls"></div>
				<div id="controlsPanelActions"></div>
			</div>
		</div>

		<div id="bottomBar" class="row">
			<div class="col-md-4">
				<div id="presetManagerControls"></div>
			</div>
			<div class="col-md-4">
				Load presets from bank file:
				<form action='#' onsubmit="return false;">
				<input type='file' id='fileinput'>
				<input type='button' id='btnLoad' value='Load' onclick='loadBankFile();'>
				</form>
			</div>
			<div class="col-md-4">
				<div id="midiSettings"></div>
			</div>
		</div>
	</div>

	<!-- JS -->
	<script type='text/javascript' src='3rdparty/jquery.min.js'></script>
	<script type='text/javascript' src='3rdparty/bootstrap.min.js'></script>
	<script type='text/javascript' src='3rdparty/bootstrap-slider.min.js'></script>
	<script type='text/javascript' src='3rdparty/tabletop.min.js'></script>
	<script type='text/javascript' src='3rdparty/webmidi.min.js'></script>
	<script type='text/javascript' src='globals.js'></script>
	<script type='text/javascript' src='utils.js'></script>
	<script type='text/javascript' src='midi.js'></script>
	<script type='text/javascript' src='store.js'></script>
	<script type='text/javascript' src='components.js'></script>
	<script type='text/javascript' src='ui.js'></script>
	<script type='text/javascript'>
		function init(){
			initMIDI(document.getElementById("midiSettings"));
			autoAdjustUIScaleFactor();

			ONLINE_STORE = new GoogleSpreadsheetStore(
			    scriptURL="https://script.google.com/macros/s/AKfycbxdlE7J-VHEfSAEtj-MtA_MptxmtiMUWTbRU9oaU3zaZ-cSptW-/exec", 
			    spreadsheetURL="https://docs.google.com/spreadsheets/d/10FpFlL8FKWJzRu2La21AdD-nhivl-7agzHNiIhQ5Llg/edit?usp=sharing");

			LOCAL_STORE = new LocalStore();

			PRESET_MANAGER = new PresetManager();
			drawPresetControls();
			drawPresetManagerControls();
			
			PRESET_MANAGER.loadLocalAndOnlinePresets(function(){
				if (PRESET_MANAGER.currentPreset === undefined) {
					PRESET_MANAGER.setCurrentPresetToFirstPreset();
					drawPresetControls();
	                drawPresetManagerControls();
	            }            
			});
		}
	</script>
</body>
</html>